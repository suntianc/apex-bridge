# ApexBridge Staging Environment Variables Template
# Copy this file to .env.staging and fill in actual values
#
# 说明：此文件用于 staging 环境，配置项按功能分组
# SurrealDB 相关配置已按迁移阶段组织

# ====================
# SurrealDB Connection - Required
# ====================

# SurrealDB WebSocket endpoint (default: ws://localhost:8000)
SURREAL_URL="ws://localhost:8000"

# Namespace for data isolation (default: apexbridge)
SURREAL_NS="apexbridge"

# Database name for staging
SURREAL_DB="staging"

# Authentication credentials
SURREAL_USER="root"
SURREAL_PASS="${SURREALDB_ROOT_PASSWORD}"

# ====================
# Phase 2: Low-Risk Domain Dual-Write
# Enable after Phase 2 verification
# ====================

# Enable dual-write for MCP configuration data
# Recommended: Enable after Day 1 verification
APEX_SURREALDB_MCP_DUAL_WRITE=false

# Enable dual-write for trajectory data
# Recommended: Enable after Day 2 verification
APEX_SURREALDB_TRAJECTORY_DUAL_WRITE=false

# ====================
# Phase 3: High-Risk Domain Dual-Write
# Enable after Phase 2 stable for 24 hours
# ====================

# Enable dual-write for LLM configuration data
# Recommended: Enable after Day 3-4 verification
APEX_SURREALDB_LLM_CONFIG_DUAL_WRITE=false

# Enable dual-write for conversation history
# Recommended: Enable after Day 5-6 verification
APEX_SURREALDB_CONVERSATION_DUAL_WRITE=false

# Consistency monitoring interval (milliseconds)
# Default: 60000 (60 seconds)
APEX_CONSISTENCY_CHECK_INTERVAL_MS=60000

# Enable background sync for consistency verification
# Default: true
APEX_BACKGROUND_SYNC=true

# ====================
# Phase 4: Vector Storage Migration
# Enable after Phase 3 stable for 72 hours
# ====================

# Enable dual-write for vector storage
# Recommended: Enable after Day 7-9 verification
APEX_SURREALDB_VECTOR_DUAL_WRITE=false

# Enable read-write split for vector storage
# Writes go to primary (LanceDB), reads from replica (SurrealDB)
# Recommended: Enable after Day 10-12 verification
APEX_SURREALDB_VECTOR_RW_SPLIT=false

# Batch size for vector migration operations
# Default: 100
APEX_SURREALDB_VECTOR_BATCH_SIZE=100

# ====================
# Master Feature Flag - Required
# ====================

# Master switch to enable SurrealDB features
# Must be set to true for any SurrealDB functionality
# Default: false
APEX_SURREALDB_ENABLED=false

# ====================
# Server Configuration - System
# ====================

# Server port (default: 3000)
APEX_BRIDGE_PORT=8088

# Server host (default: 0.0.0.0)
APEX_BRIDGE_HOST="0.0.0.0"

# HTTP request body size limit (default: 100mb)
MAX_REQUEST_SIZE="100mb"

# ====================
# LLM Configuration - System
# ====================

# Embedding provider for vector operations
# Options: openai, ollama, deepseek
EMBEDDING_PROVIDER="openai"

# Embedding model name
EMBEDDING_MODEL="text-embedding-3-small"

# OpenAI API key (if using OpenAI for embeddings)
OPENAI_API_KEY="${OPENAI_API_KEY}"

# ====================
# Logging Configuration - System
# ====================

# Log level (error/warn/info/debug)
LOG_LEVEL="info"

# Security log level (debug/info/warn/error/off)
SECURITY_LOG_LEVEL="warn"

# Enable security logging (true/false)
SECURITY_LOG_ENABLED=true

# ====================
# Environment - System
# ====================

# Node environment (development/staging/production)
NODE_ENV=staging

# Auto-start control (true/false)
# Set to false for debugging
APEX_BRIDGE_AUTOSTART=true
