<div align="center">
  <img src="./assets/banner.png" alt="ApexBridge Banner" width="100%" />

# ApexBridge

**ä¸‹ä¸€ä»£è½»é‡çº§ AI Agent æ¡†æ¶ï¼ŒMCP åè®®é›†æˆä¸“å®¶**

è¿æ¥æ™ºèƒ½çš„æ¡¥æ¢ Â· è½»é‡çº§æ¶æ„ Â· å¤šæ¨¡å‹ç¼–æ’ Â· æŠ€èƒ½æ‰©å±•

[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0%2B-3178c6?style=flat-square&logo=typescript&logoColor=white)](https://www.typescriptlang.org/)
[![Node.js](https://img.shields.io/badge/Node.js-18%2B-339933?style=flat-square&logo=node.js&logoColor=white)](https://nodejs.org/)
[![MCP Ready](https://img.shields.io/badge/MCP-Ready-green.svg)](https://github.com/model-context-protocol)
[![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg)](http://makeapullrequest.com)

[æ ¸å¿ƒç‰¹æ€§](#-æ ¸å¿ƒç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [ä½¿ç”¨ç¤ºä¾‹](#-ä½¿ç”¨ç¤ºä¾‹) â€¢ [è·¯çº¿å›¾](#-è·¯çº¿å›¾) â€¢ [è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)

</div>

---

## ğŸ“– é¡¹ç›®ä»‹ç»

**ApexBridge** æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ AI Agent æ¡†æ¶ï¼Œæ—¨åœ¨æ„å»ºå­¤ç«‹çš„å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ä¸ç°å®è¡ŒåŠ¨ä¹‹é—´çš„æ¡¥æ¢ã€‚ä¸“ä¸ºé€Ÿåº¦å’Œçµæ´»æ€§è€Œè®¾è®¡ï¼Œæ˜¯å¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„è¿æ¥çº½å¸¦ã€‚

ä¸ç¬¨é‡çš„ä¼ ç»Ÿæ¡†æ¶ä¸åŒï¼ŒApexBridge ä¸“æ³¨äºï¼š

- **è½»é‡çº§æ¶æ„**ï¼šé«˜æ•ˆçš„å†…å­˜ç®¡ç†ï¼Œé€‚åˆæœ¬åœ°éƒ¨ç½²å’Œè¾¹ç¼˜è®¾å¤‡ã€‚
- **MCP åŸç”Ÿæ”¯æŒ**ï¼šæ·±åº¦é›†æˆ **Model Context Protocol (MCP)**ï¼Œæ ‡å‡†åŒ–ä¸Šä¸‹æ–‡å…±äº«å’Œå·¥å…·è°ƒç”¨ã€‚
- **æ¨¡å‹æ— å…³ç¼–æ’**ï¼šæ— ç¼åˆ‡æ¢ OpenAIã€Claudeã€DeepSeekã€Ollama ç­‰å¤šç§ LLMã€‚
- **æ™ºèƒ½ä¸Šä¸‹æ–‡ç®¡ç†**ï¼šæ”¯æŒ 4 å±‚ä¸Šä¸‹æ–‡å‹ç¼©ç­–ç•¥ï¼Œé•¿å¯¹è¯æ— å¿§ã€‚

> "è¿æ¥æ™ºèƒ½ä¸æ‰§è¡Œçš„æ¡¥æ¢ï¼Œå¼€å¯è‡ªä¸»ä»£ç†æ–°æ—¶ä»£ã€‚"

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

| ç‰¹æ€§                  | æè¿°                                                                                                      |
| :-------------------- | :-------------------------------------------------------------------------------------------------------- |
| ğŸ§  **å¤šæ¨¡å‹æ”¯æŒ**     | ç»Ÿä¸€æ¥å£æ”¯æŒ GPT-4ã€Claude 3.5ã€Llama 3ã€DeepSeek ç­‰ï¼Œæ ¹æ®ä»»åŠ¡å¤æ‚åº¦åŠ¨æ€åˆ‡æ¢æ¨¡å‹ã€‚                        |
| ğŸ”Œ **MCP åè®®é›†æˆ**   | å®Œå…¨å…¼å®¹ **Model Context Protocol**ï¼Œå®ç°ä»£ç†é—´æ ‡å‡†åŒ–ä¸Šä¸‹æ–‡å…±äº«å’Œå·¥å…·ä½¿ç”¨ã€‚                               |
| ğŸ› ï¸ **æŠ€èƒ½ç³»ç»Ÿ**       | æ¨¡å—åŒ–æŠ€èƒ½æ³¨å†Œï¼Œæ”¯æŒé€šè¿‡ YAML å®šä¹‰å·¥å…·å¹¶åŠ¨æ€ç»‘å®šåˆ°ä»£ç†ã€‚                                                  |
| âš¡ **é«˜æ€§èƒ½æ‰§è¡Œ**     | æ ¸å¿ƒé€»è¾‘é’ˆå¯¹ä½å»¶è¿Ÿè¿›è¡Œä¼˜åŒ–ï¼Œé€‚åˆå®æ—¶äº¤äº’å’Œè¾¹ç¼˜è®¡ç®—åœºæ™¯ã€‚                                                  |
| ğŸ”„ **æ™ºèƒ½ä¸Šä¸‹æ–‡å‹ç¼©** | 4 å±‚å‹ç¼©ç­–ç•¥ï¼ˆTruncate/Prune/Summary/Hybridï¼‰ï¼Œ100 æ¡æ¶ˆæ¯å¯å‹ç¼©è‡³ ~4000 tokensï¼ŒèŠ‚çœé«˜è¾¾ 44% ä¸Šä¸‹æ–‡ç©ºé—´ã€‚ |
| ğŸŒŠ **æµå¼å“åº”**       | WebSocket å®æ—¶æ¨é€æ€è€ƒè¿‡ç¨‹ä¸ç»“æœï¼Œæ”¯æŒéšæ—¶ä¸­æ–­ã€‚                                                          |

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```mermaid
graph TD
    User[ç”¨æˆ· / å®¢æˆ·ç«¯] -->|è¯·æ±‚| API[ApexBridge æ ¸å¿ƒ]

    subgraph "ApexBridge å¼•æ“"
        API --> Router[æ¨¡å‹è·¯ç”±å™¨]
        Router -->|ç®€å•ä»»åŠ¡| Local[æœ¬åœ° LLM]
        Router -->|å¤æ‚ä»»åŠ¡| Cloud[äº‘ç«¯ LLM]

        Context[ä¸Šä¸‹æ–‡ç®¡ç†å™¨] <--> Router
        Memory[(å‘é‡æ•°æ®åº“)] <--> Context
    end

    subgraph "èƒ½åŠ›å±‚"
        Tools[æŠ€èƒ½æ³¨å†Œè¡¨]
        MCP[MCP å®¢æˆ·ç«¯]
    end

    Router --> Tools
    Router --> MCP
    MCP --> External[å¤–éƒ¨åº”ç”¨ / æ•°æ®æº]
```

### æ ¸å¿ƒç»„ä»¶

| ç»„ä»¶                          | åŠŸèƒ½                                                 |
| ----------------------------- | ---------------------------------------------------- |
| **ChatService**               | èŠå¤©åè°ƒå™¨ï¼Œå¤„ç†æ¶ˆæ¯æµå’Œå‹ç¼©é€»è¾‘                     |
| **LLMManager**                | å¤šæ¨¡å‹é€‚é…å™¨ç®¡ç†ï¼Œæ”¯æŒ OpenAI/Claude/DeepSeek/Ollama |
| **ContextCompressionService** | 4 å±‚ä¸Šä¸‹æ–‡å‹ç¼©å¼•æ“                                   |
| **ToolRetrievalService**      | åŸºäº LanceDB çš„å‘é‡æ£€ç´¢å’Œå·¥å…·åŒ¹é…                    |
| **SkillManager**              | æœ¬åœ°æŠ€èƒ½ç®¡ç†å’Œç´¢å¼•                                   |
| **MCPIntegrationService**     | MCP åè®®å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯                               |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Node.js**: 18.0+
- **åŒ…ç®¡ç†å™¨**: npm / yarn / pnpm
- **API Keys**: OpenAI / Anthropic / DeepSeek ç­‰ï¼ˆæ ¹æ®ä½¿ç”¨çš„æ¨¡å‹ï¼‰

### å®‰è£…éƒ¨ç½²

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/suntianc/apex-bridge.git
cd apex-bridge

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# ç”Ÿäº§æ„å»º
npm run build
npm start
```

### ç¯å¢ƒé…ç½®

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š

```ini
# .env é…ç½®ç¤ºä¾‹
NODE_ENV=development
PORT=8088

# LLM API é…ç½®
OPENAI_API_KEY=sk-...
ANTHROPIC_API_KEY=sk-ant-...
DEEPSEEK_API_KEY=...

# Embedding æ¨¡å‹ï¼ˆç”¨äºå‘é‡æœç´¢ï¼‰
EMBEDDING_PROVIDER=openai
EMBEDDING_MODEL=text-embedding-3-small

# æ—¥å¿—çº§åˆ«
LOG_LEVEL=info
```

---

## ğŸ’» ä½¿ç”¨ç¤ºä¾‹

### 1. åŸºç¡€èŠå¤©è¯·æ±‚

```bash
# è°ƒç”¨èŠå¤©å®Œæˆæ¥å£ï¼ˆOpenAI å…¼å®¹ï¼‰
curl -X POST http://localhost:8088/v1/chat/completions \
  -H "Content-Type: application/json" \
  -d '{
    "messages": [
      {"role": "system", "content": "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šåŠ©æ‰‹"},
      {"role": "user", "content": "è¯·ä»‹ç»ä¸€ä¸‹ ApexBridge"}
    ],
    "model": "gpt-4",
    "stream": false
  }'
```

### 2. å¯ç”¨ä¸Šä¸‹æ–‡å‹ç¼©

```typescript
// å¯ç”¨æ™ºèƒ½ä¸Šä¸‹æ–‡å‹ç¼©
const result = await chatService.processMessage(messages, {
  model: "gpt-4",
  contextCompression: {
    enabled: true,
    strategy: "hybrid", // truncate | prune | summary | hybrid
    auto: true, // è‡ªåŠ¨æ£€æµ‹æº¢å‡º
    preserveSystemMessage: true,
  },
});
```

### 3. æµå¼å“åº”

```bash
# å¯ç”¨æµå¼è¾“å‡º
curl -X POST http://localhost:8088/v1/chat/completions \
  -H "Content-Type: application/json" \
  -d '{
    "messages": [{"role": "user", "content": "å†™ä¸€ä¸ª Python å¿«é€Ÿæ’åº"}],
    "model": "gpt-4",
    "stream": true
  }'
```

---

## ğŸ—ºï¸ è·¯çº¿å›¾

| ç‰ˆæœ¬ | çŠ¶æ€      | ç‰¹æ€§                           |
| ---- | --------- | ------------------------------ |
| v1.0 | âœ… å·²å®Œæˆ | æ ¸å¿ƒæ¶æ„ã€äº‹ä»¶å¾ªç¯ã€å¤šæ¨¡å‹æ”¯æŒ |
| v1.1 | âœ… å·²å®Œæˆ | MCP åè®®å®Œæ•´å®ç°ã€ä¸Šä¸‹æ–‡å‹ç¼©   |
| v1.2 | ğŸ”„ å¼€å‘ä¸­ | WebSocket åˆ†å¸ƒå¼ä»£ç†èŠ‚ç‚¹       |

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
apex-bridge/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core/                    # æ ¸å¿ƒå¼•æ“
â”‚   â”‚   â”œâ”€â”€ ProtocolEngine.ts    # ABP åè®®è§£æ
â”‚   â”‚   â”œâ”€â”€ LLMManager.ts        # LLM é€‚é…å™¨ç®¡ç†
â”‚   â”‚   â””â”€â”€ llm/adapters/        # 6 ä¸ª LLM é€‚é…å™¨å®ç°
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                # ä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ ChatService.ts       # èŠå¤©åè°ƒå™¨
â”‚   â”‚   â”œâ”€â”€ ContextCompression/  # ä¸Šä¸‹æ–‡å‹ç¼©ï¼ˆ4 å±‚ç­–ç•¥ï¼‰
â”‚   â”‚   â”œâ”€â”€ ToolRetrievalService/ # å‘é‡æ£€ç´¢å’Œå·¥å…·åŒ¹é…
â”‚   â”‚   â”œâ”€â”€ SkillManager.ts      # æŠ€èƒ½ç®¡ç†
â”‚   â”‚   â””â”€â”€ MCPIntegrationService.ts # MCP é›†æˆ
â”‚   â”‚
â”‚   â”œâ”€â”€ strategies/              # ç­–ç•¥æ¨¡å¼
â”‚   â”‚   â”œâ”€â”€ ReActStrategy.ts     # å¤šè½®æ€è€ƒç­–ç•¥
â”‚   â”‚   â””â”€â”€ SingleRoundStrategy.ts # å•è½®å¿«é€Ÿå“åº”
â”‚   â”‚
â”‚   â””â”€â”€ api/                     # æ¥å£å±‚
â”‚       â”œâ”€â”€ controllers/         # æ§åˆ¶å™¨
â”‚       â”œâ”€â”€ routes/              # è·¯ç”±å®šä¹‰
â”‚       â””â”€â”€ websocket/           # WebSocket å®æ—¶é€šä¿¡
â”‚
â”œâ”€â”€ tests/                       # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ assets/                      # é™æ€èµ„æº
â”œâ”€â”€ docs/                        # æ–‡æ¡£
â””â”€â”€ .data/                       # æ•°æ®å­˜å‚¨ï¼ˆSQLite + LanceDBï¼‰
```

---

## ğŸ›  æŠ€æœ¯æ ˆ

<div align="center">

![Node.js](https://img.shields.io/badge/Node.js-18%2B-339933?style=for-the-badge&logo=node.js&logoColor=white)
![TypeScript](https://img.shields.io/badge/TypeScript-5.0%2B-3178C6?style=for-the-badge&logo=typescript&logoColor=white)
![Express](https://img.shields.io/badge/Express.js-000000?style=for-the-badge&logo=express&logoColor=white)
![SQLite](https://img.shields.io/badge/SQLite-003B57?style=for-the-badge&logo=sqlite&logoColor=white)
![LanceDB](https://img.shields.io/badge/LanceDB-Vector-FF6C37?style=for-the-badge)

</div>

---

## ğŸ“š æ–‡æ¡£

| æ–‡æ¡£                                      | è¯´æ˜                 |
| ----------------------------------------- | -------------------- |
| [å¿«é€Ÿå¼€å§‹](docs/getting-started.md)       | å…¥é—¨æŒ‡å—å’Œå®‰è£…é…ç½®   |
| [æ¶æ„è®¾è®¡](docs/architecture.md)          | ç³»ç»Ÿè®¾è®¡æ·±åº¦è§£æ     |
| [API å‚è€ƒ](docs/api-reference.md)         | å®Œæ•´çš„ API æ–‡æ¡£      |
| [ä¸Šä¸‹æ–‡å‹ç¼©](docs/context-compression.md) | 4 å±‚å‹ç¼©ç­–ç•¥è¯¦è§£     |
| [MCP é›†æˆæŒ‡å—](docs/mcp-integration.md)   | MCP æœåŠ¡å™¨é…ç½®å’Œä½¿ç”¨ |

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº MIT è®¸å¯è¯å¼€æº - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

---
