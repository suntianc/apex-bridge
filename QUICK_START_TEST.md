# Web管理后台快速测试指南

## ✅ 当前状态
- ✅ 后端已编译成功
- ✅ 前端已构建成功（admin/dist 已生成）
- ✅ 配置文件已存在：`config/admin-config.json`
- ⚠️ 配置状态：`setup_completed: false`（将进入设置向导）

## 🚀 启动测试步骤

### 1. 启动服务器
```bash
cd "D:\Apex Bridge\apex-bridge"
npm start
# 或开发模式（支持热重载）
npm run dev
```

### 2. 访问管理界面
打开浏览器访问：**http://localhost:8088/admin**

### 3. 预期行为
1. **首次访问** → 自动重定向到 `/admin/setup`（设置向导）
2. **完成设置向导** → 跳转到 `/admin/login`（登录页）
3. **登录成功** → 跳转到 `/admin/dashboard`（Dashboard）

## 📋 测试流程

### 阶段1：设置向导（Setup Wizard）
**访问地址**：http://localhost:8088/admin/setup

1. **步骤1 - 管理员账户**
   - 输入用户名：`admin`（至少3个字符）
   - 输入密码：`admin123`（至少6个字符）
   - 确认密码：`admin123`
   - 如果存在.env文件，可测试"从.env导入"按钮

2. **步骤2 - LLM配置**
   - 选择默认提供商：`OpenAI`（或其他）
   - 输入API Key：你的LLM API密钥
   - Base URL：保持默认或自定义
   - 默认模型：保持默认或自定义

3. **步骤3 - 可选功能**
   - 可以选择启用/禁用RAG功能
   - 如果启用RAG，配置相关参数

4. **步骤4 - 完成设置**
   - 查看配置摘要
   - 点击"完成设置"
   - 系统保存配置并跳转到登录页

### 阶段2：登录测试
**访问地址**：http://localhost:8088/admin/login

- 使用设置向导中创建的用户名和密码登录
- **成功**：跳转到Dashboard
- **失败**：显示错误提示

### 阶段3：Dashboard测试
**访问地址**：http://localhost:8088/admin/dashboard

检查：
- ✅ 系统状态卡片（服务器运行状态、节点数）
- ✅ 统计信息（请求数、对话数）

### 阶段4：配置管理测试
**访问地址**：http://localhost:8088/admin/settings

测试项：
1. **读取配置**：页面加载时显示当前配置
2. **修改系统参数**：端口、主机、环境、调试模式
3. **修改认证配置**：ABP Key、API Keys（兼容读取旧 vcpKey）
4. **修改LLM配置**：各提供商的配置
5. **修改RAG配置**：启用/禁用、配置参数
6. **保存配置**：点击"保存配置"按钮
7. **重置配置**：点击"重置为默认"按钮

### 阶段5：节点管理测试
**访问地址**：http://localhost:8088/admin/nodes

测试项：
1. **查看节点列表**：初始应为空
2. **注册节点**：
   - 点击"注册新节点"
   - 填写节点名称：`测试节点1`
   - 选择类型：`worker` / `companion` / `custom`
   - 填写端点地址（可选）
   - 填写能力列表（可选）
   - 点击"注册"
3. **编辑节点**：点击节点行的"编辑"，修改信息
4. **删除节点**：点击节点行的"删除"，确认删除

## 🔍 验证点

### 配置文件验证
测试完成后，检查 `config/admin-config.json`：
- ✅ 配置已正确保存
- ✅ `setup_completed: true`
- ✅ `auth.admin` 包含管理员账户信息
- ✅ LLM配置已保存
- ✅ 其他配置项已保存

### 功能验证
- ✅ 首次启动自动进入设置向导
- ✅ 设置完成后能正常登录
- ✅ 配置修改后能保存成功
- ✅ 节点注册/编辑/删除功能正常
- ✅ 路由守卫工作正常（未登录自动跳转）
- ✅ 侧边栏导航正常工作

## ⚠️ 注意事项

1. **系统参数修改**：修改端口、主机等需要重启服务器才能生效
2. **配置备份**：每次保存配置前会自动创建备份（`config/admin-config.json.backup`）
3. **节点状态**：节点状态每5秒自动刷新
4. **浏览器控制台**：如有错误，查看浏览器控制台的错误信息

## 📝 问题记录

如果遇到问题，请记录：
- 问题描述
- 操作步骤
- 预期行为 vs 实际行为
- 错误信息（服务器日志 + 浏览器控制台）

## 🎯 下一步

测试完成后：
1. 记录测试结果
2. 反馈发现的问题
3. 根据问题进行修复和优化

