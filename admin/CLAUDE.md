# ApexBridge ç®¡ç†åå°

[æ ¹ç›®å½•](../../CLAUDE.md) > [apex-bridge](../) > **admin**

## ğŸ¯ æ¨¡å—èŒè´£

ApexBridgeç®¡ç†åå°æ˜¯åŸºäºReact 18 + TypeScript + Viteæ„å»ºçš„ç°ä»£åŒ–Webç®¡ç†ç•Œé¢ï¼Œæä¾›ç³»ç»Ÿé…ç½®ã€èŠ‚ç‚¹ç®¡ç†ã€äººæ ¼é…ç½®ã€å…³ç³»ç®¡ç†ç­‰æ ¸å¿ƒåŠŸèƒ½çš„å¯è§†åŒ–æ“ä½œç•Œé¢ã€‚

## ğŸš€ å…¥å£ä¸å¯åŠ¨

### ä¸»è¦å…¥å£ç‚¹
- **ä¸»å…¥å£**: `src/main.tsx` - Reactåº”ç”¨æ ¹èŠ‚ç‚¹
- **åº”ç”¨ç»„ä»¶**: `src/App.tsx` - åº”ç”¨ä¸»ç»„ä»¶ï¼Œè´Ÿè´£åˆå§‹åŒ–æ£€æŸ¥
- **è·¯ç”±é…ç½®**: `src/router/index.tsx` - è·¯ç”±ä¿æŠ¤å’Œå¯¼èˆªé€»è¾‘

### å¯åŠ¨æµç¨‹
1. Reactåº”ç”¨åˆå§‹åŒ–
2. æ£€æŸ¥ç³»ç»Ÿè®¾ç½®çŠ¶æ€
3. è·¯ç”±ä¿æŠ¤é€»è¾‘ï¼ˆæœªè®¾ç½®â†’è®¾ç½®å‘å¯¼ï¼Œæœªç™»å½•â†’ç™»å½•é¡µï¼‰
4. åŠ è½½å¯¹åº”çš„åŠŸèƒ½é¡µé¢

### æ„å»ºä¸éƒ¨ç½²
1. å¼€å‘æ¨¡å¼ï¼š
   ```bash
   cd apex-bridge/admin
   npm install
   npm run dev
   ```
2. ç”Ÿäº§æ„å»ºä¸é™æ€æ‰˜ç®¡ï¼š
   ```bash
   cd apex-bridge/admin
   npm install
   npm run build
   # äº§ç‰©ä½äº admin/distï¼Œå¯ç”±ä¸»æœåŠ¡æŒ‚è½½åˆ° /admin
   ```
3. æ—  .env é…ç½®è¯´æ˜ï¼ˆä¸åç«¯ä¸€è‡´ï¼‰ï¼š
   - åç«¯é…ç½®é›†ä¸­åœ¨ `config/admin-config.json`ï¼ŒSettings é¡µé¢å¯å…¨é‡ä¿®æ”¹ä¿å­˜
   - ä¸å†ä¾èµ– `.env`ï¼Œç®¡ç†åå°ä»…ä¾èµ–åç«¯ API
   - éƒ¨ç½²æ—¶ç¡®ä¿åç«¯å·²å¼€å¯é™æ€èµ„æºæ‰˜ç®¡ `admin/dist` åˆ° `/admin`

## ğŸŒ å¯¹å¤–æ¥å£

### APIé›†æˆ
- **åŸºç¡€å®¢æˆ·ç«¯**: `src/api/client.ts` - Axioså®ä¾‹é…ç½®
- **è®¤è¯API**: `src/api/authApi.ts` - ç™»å½•è®¤è¯ç›¸å…³
- **èŠ‚ç‚¹API**: `src/api/nodeApi.ts` - èŠ‚ç‚¹ç®¡ç†æ¥å£
- **äººæ ¼API**: `src/api/personalityApi.ts` - äººæ ¼é…ç½®æ¥å£
- **é…ç½®API**: `src/api/configApi.ts` - ç³»ç»Ÿé…ç½®æ¥å£
- **å…³ç³»API**: `src/api/relationshipApi.ts` - å…³ç³»ç®¡ç†æ¥å£
- **ç³»ç»ŸAPI**: `src/api/systemApi.ts` - ç³»ç»ŸçŠ¶æ€æ¥å£
- **è®¾ç½®API**: `src/api/setupApi.ts` - åˆå§‹è®¾ç½®æ¥å£

### çŠ¶æ€ç®¡ç†
- **è®¤è¯çŠ¶æ€**: `src/store/authStore.ts` - Zustandç®¡ç†çš„è®¤è¯çŠ¶æ€
- **èŠ‚ç‚¹çŠ¶æ€**: `src/store/nodeStore.ts` - èŠ‚ç‚¹æ•°æ®ç®¡ç†
- **é…ç½®çŠ¶æ€**: `src/store/configStore.ts` - ç³»ç»Ÿé…ç½®ç®¡ç†
- **è®¾ç½®çŠ¶æ€**: `src/store/setupStore.ts` - è®¾ç½®å‘å¯¼çŠ¶æ€

## ğŸ“¦ å…³é”®ä¾èµ–ä¸é…ç½®

### æ ¸å¿ƒæŠ€æœ¯æ ˆ
```json
{
  "react": "^18.2.0",
  "react-dom": "^18.2.0",
  "react-router-dom": "^6.20.0",
  "zustand": "^4.4.7",
  "axios": "^1.6.2",
  "tailwindcss": "^3.3.6",
  "vite": "^5.0.8"
}
```

### Viteé…ç½®ç‰¹ç‚¹
- **åŸºç¡€è·¯å¾„**: `/admin/` - ç¡®ä¿èµ„æºè·¯å¾„æ­£ç¡®
- **ä»£ç†é…ç½®**: å¼€å‘æ—¶APIä»£ç†åˆ° `http://localhost:8088`
- **è·¯å¾„åˆ«å**: `@` â†’ `./src/`
- **æ„å»ºè¾“å‡º**: `dist` ç›®å½•

### TypeScripté…ç½®
- **ä¸¥æ ¼æ¨¡å¼**: å¯ç”¨ä¸¥æ ¼ç±»å‹æ£€æŸ¥
- **ç°ä»£è¯­æ³•**: ES2020ç›®æ ‡ï¼Œæ”¯æŒJSX
- **è·¯å¾„æ˜ å°„**: æ”¯æŒ `@/` åˆ«åå¯¼å…¥

## ğŸ¨ æ•°æ®æ¨¡å‹

### è·¯ç”±ä¿æŠ¤é€»è¾‘
```typescript
// ä¼ªä»£ç è¯´æ˜
if (!isSetupCompleted) {
  return <Setup />;
}
if (!isAuthenticated) {
  return <Login />;
}
return <Dashboard />;
```

### çŠ¶æ€ç®¡ç†ç»“æ„
```typescript
// è®¤è¯çŠ¶æ€
interface AuthState {
  isAuthenticated: boolean;
  login: (credentials) => Promise<void>;
  logout: () => void;
}

// èŠ‚ç‚¹çŠ¶æ€
interface NodeState {
  nodes: Node[];
  loading: boolean;
  fetchNodes: () => Promise<void>;
}
```

## ğŸ§ª æµ‹è¯•ä¸è´¨é‡

### æµ‹è¯•ç­–ç•¥
- **å•å…ƒæµ‹è¯•**: çŠ¶æ€ç®¡ç†å’Œå·¥å…·å‡½æ•°
- **é›†æˆæµ‹è¯•**: APIè°ƒç”¨å’Œç»„ä»¶äº¤äº’
- **ç«¯åˆ°ç«¯æµ‹è¯•**: å®Œæ•´ç”¨æˆ·æµç¨‹

### ä»£ç è´¨é‡å·¥å…·
- **ESLint**: TypeScriptå’ŒReactä»£ç è§„èŒƒ
- **TypeScript**: ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥
- **Vite**: å¿«é€Ÿçš„å¼€å‘å’Œæ„å»ºå·¥å…·

### å¼€å‘è§„èŒƒ
- **ç»„ä»¶ç»“æ„**: åŠŸèƒ½ç»„ä»¶ä¼˜å…ˆï¼ŒHooksæ¨¡å¼
- **çŠ¶æ€ç®¡ç†**: Zustandå•ä¸€å­˜å‚¨
- **APIè°ƒç”¨**: Axioså°è£…ï¼Œç»Ÿä¸€é”™è¯¯å¤„ç†
- **è·¯ç”±ç®¡ç†**: React Router v6ï¼Œä¿æŠ¤è·¯ç”±

## â“ å¸¸è§é—®é¢˜ (FAQ)

### Q: å¦‚ä½•æ·»åŠ æ–°çš„ç®¡ç†é¡µé¢ï¼Ÿ
A:
1. åœ¨ `src/pages/` åˆ›å»ºæ–°é¡µé¢ç»„ä»¶
2. åœ¨ `src/router/index.tsx` æ·»åŠ è·¯ç”±é…ç½®
3. åœ¨å¯¼èˆªç»„ä»¶ä¸­æ·»åŠ èœå•é¡¹
4. åˆ›å»ºå¯¹åº”çš„APIæ¥å£ï¼ˆå¦‚éœ€è¦ï¼‰

### Q: å¦‚ä½•ä¿®æ”¹APIä»£ç†é…ç½®ï¼Ÿ
A: ç¼–è¾‘ `vite.config.ts` ä¸­çš„ `server.proxy` é…ç½®ï¼š
```typescript
proxy: {
  '/api': {
    target: 'http://localhost:8088',
    changeOrigin: true,
  },
}
```

### Q: å¦‚ä½•æ‰©å±•çŠ¶æ€ç®¡ç†ï¼Ÿ
A:
1. åœ¨ `src/store/` åˆ›å»ºæ–°çš„storeæ–‡ä»¶
2. ä½¿ç”¨ Zustand åˆ›å»ºçŠ¶æ€ç®¡ç†
3. åœ¨éœ€è¦çš„ç»„ä»¶ä¸­ä½¿ç”¨ `useStore` hooks

## ğŸ“ ç›¸å…³æ–‡ä»¶æ¸…å•

### æ ¸å¿ƒæ–‡ä»¶
- `src/main.tsx` - åº”ç”¨å…¥å£
- `src/App.tsx` - ä¸»åº”ç”¨ç»„ä»¶
- `src/router/index.tsx` - è·¯ç”±é…ç½®
- `vite.config.ts` - Viteé…ç½®
- `tsconfig.json` - TypeScripté…ç½®

### åŠŸèƒ½é¡µé¢
- `src/pages/Setup.tsx` - åˆå§‹è®¾ç½®å‘å¯¼
- `src/pages/Login.tsx` - ç™»å½•é¡µé¢
- `src/pages/Dashboard.tsx` - ä¸»ä»ªè¡¨æ¿
- `src/pages/Nodes.tsx` - èŠ‚ç‚¹ç®¡ç†
- `src/pages/Personalities.tsx` - äººæ ¼é…ç½®
- `src/pages/Relationships.tsx` - å…³ç³»ç®¡ç†
- `src/pages/Settings.tsx` - ç³»ç»Ÿè®¾ç½®

### ç»„ä»¶å’Œå·¥å…·
- `src/components/Layout.tsx` - å¸ƒå±€ç»„ä»¶
- `src/api/` - APIå®¢æˆ·ç«¯å’Œæ¥å£å®šä¹‰
- `src/store/` - çŠ¶æ€ç®¡ç†store
- `src/styles/` - æ ·å¼æ–‡ä»¶
- `src/utils/` - å·¥å…·å‡½æ•°

## ğŸ“Š å˜æ›´è®°å½• (Changelog)

### 2025-11-12
- åˆ›å»ºç®¡ç†åå°æ¨¡å—æ–‡æ¡£
- åˆ†ææŠ€æœ¯æ ˆå’Œæ¶æ„è®¾è®¡
- è®°å½•è·¯ç”±ä¿æŠ¤å’ŒçŠ¶æ€ç®¡ç†ç­–ç•¥

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

1. **UIç»„ä»¶åº“** - è€ƒè™‘å¼•å…¥shadcn/uiæå‡ç•Œé¢è´¨é‡
2. **å“åº”å¼è®¾è®¡** - å®Œå–„ç§»åŠ¨ç«¯é€‚é…
3. **ä¸»é¢˜ç³»ç»Ÿ** - æ”¯æŒæ·±è‰²æ¨¡å¼å’Œä¸»é¢˜åˆ‡æ¢
4. **å›½é™…åŒ–** - æ·»åŠ å¤šè¯­è¨€æ”¯æŒ
5. **æ€§èƒ½ä¼˜åŒ–** - ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½ä¼˜åŒ–
6. **é”™è¯¯è¾¹ç•Œ** - æ·»åŠ Reacté”™è¯¯è¾¹ç•Œå¤„ç†
7. **å•å…ƒæµ‹è¯•** - ä¸ºç»„ä»¶å’Œstoreæ·»åŠ æµ‹è¯•è¦†ç›–
8. **æ–‡æ¡£å®Œå–„** - æ·»åŠ ç»„ä»¶ä½¿ç”¨ç¤ºä¾‹å’ŒAPIæ–‡æ¡£