# Playbook ç³»ç»Ÿæ¶æ„æ”¹é€  - å®æ–½è®¡åˆ’

## æ–‡æ¡£ä¿¡æ¯
- **æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0
- **åˆ›å»ºæ—¥æœŸ**: 2025-12-18
- **ä½œè€…**: é¡¹ç›®ç®¡ç†å›¢é˜Ÿ
- **çŠ¶æ€**: å¾…è¯„å®¡

## 1. é¡¹ç›®æ¦‚è§ˆ

### 1.1 æ€»ä½“æ—¶é—´çº¿
- **é¡¹ç›®å‘¨æœŸ**: 8 å‘¨ (2+3+2+1)
- **å¼€å§‹æ—¥æœŸ**: 2025-12-18
- **é¢„è®¡å®Œæˆ**: 2026-02-12
- **å›¢é˜Ÿè§„æ¨¡**: 5-7 äºº (2 åç«¯ + 1 å‰ç«¯ + 1 ç®—æ³• + 1 æµ‹è¯• + 1 PM)

### 1.2 é˜¶æ®µåˆ’åˆ†

```
Phase 1: åŸºç¡€å»ºè®¾ (2å‘¨)
â”œâ”€ Week 1: æ ¸å¿ƒå¼•æ“å¼€å‘
â””â”€ Week 2: æ³¨å…¥åŸºç¡€è®¾æ–½

Phase 2: æ ¸å¿ƒåŠŸèƒ½å®ç° (3å‘¨)
â”œâ”€ Week 3: åŠ¨æ€ç±»å‹å¼•æ“
â”œâ”€ Week 4: åŒ¹é…ç®—æ³• + æ¨¡æ¿ç³»ç»Ÿ
â””â”€ Week 5: å¤šæ ‡ç­¾ç®¡ç† + ç½®ä¿¡åº¦æ¨¡å‹

Phase 3: æ·±åº¦é›†æˆ (2å‘¨)
â”œâ”€ Week 6: ReAct ç­–ç•¥é›†æˆ
â””â”€ Week 7: æ™ºèƒ½æ³¨å…¥ + æ•ˆæœè¯„ä¼°

Phase 4: ä¼˜åŒ–å®Œå–„ (1å‘¨)
â””â”€ Week 8: æ€§èƒ½ä¼˜åŒ– + æ–‡æ¡£å®Œå–„
```

## 2. é˜¶æ®µä¸€ï¼šåŸºç¡€å»ºè®¾ (Week 1-2)

### 2.1 Week 1: æ ¸å¿ƒå¼•æ“å¼€å‘

#### Day 1-2: TypeInductionEngine æ ¸å¿ƒç±»

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] åˆ›å»º TypeInductionEngine ç±»ç»“æ„
- [ ] å®ç°åŸºç¡€ç±»å‹å½’çº³ç®—æ³•
- [ ] æ·»åŠ èšç±»åˆ†æåŠŸèƒ½
- [ ] é›†æˆ LLM æ¨¡å¼è¯†åˆ«

**ä»£ç äº¤ä»˜**:
```typescript
// æ–°å»ºæ–‡ä»¶
src/core/playbook/TypeInductionEngine.ts

// ä¸»è¦æ–¹æ³•
- induceTypes()
- clusterPlaybooks()
- induceTypeFromCluster()
- evaluateExistingTypes()
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] èƒ½å¤Ÿä»æ¨¡æ‹Ÿæ•°æ®ä¸­è¯±å¯¼å‡º 3-5 ä¸ªç±»å‹æ ‡ç­¾
- [ ] ç½®ä¿¡åº¦è®¡ç®—æ­£ç¡® [0-1]
- [ ] èšç±»ç»“æœåˆç† (ç›¸ä¼¼åº¦ >= 0.7)
- [ ] å•å…ƒæµ‹è¯•è¦†ç›– >= 80%

**è´Ÿè´£äºº**: åç«¯å·¥ç¨‹å¸ˆ A + ç®—æ³•å·¥ç¨‹å¸ˆ
**é¢„ä¼°å·¥æ—¶**: 16 å°æ—¶

#### Day 3-4: æ•°æ®æ¨¡å‹å®ç°

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] åˆ›å»º SQLite æ•°æ®è¡¨
- [ ] å®ç° TypeVocabularyService
- [ ] å®ç° PlaybookTypeService
- [ ] å®ç° SimilarityService

**ä»£ç äº¤ä»˜**:
```sql
-- æ–°å»ºè¡¨
src/database/migrations/001_create_type_vocabulary.sql
src/database/migrations/002_create_type_similarity_matrix.sql
src/database/migrations/003_create_type_evolution_history.sql
src/database/migrations/004_create_playbook_type_assignments.sql
src/database/migrations/005_create_prompt_templates.sql
```

```typescript
// æ–°å»ºæ–‡ä»¶
src/services/TypeVocabularyService.ts
src/services/PlaybookTypeService.ts
src/services/SimilarityService.ts
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ‰€æœ‰è¡¨åˆ›å»ºæˆåŠŸ
- [ ] CRUD æ“ä½œæ­£å¸¸
- [ ] å¤–é”®çº¦æŸæœ‰æ•ˆ
- [ ] ç´¢å¼•æŸ¥è¯¢æ€§èƒ½ < 50ms

**è´Ÿè´£äºº**: åç«¯å·¥ç¨‹å¸ˆ B
**é¢„ä¼°å·¥æ—¶**: 16 å°æ—¶

#### Day 5: ç³»ç»Ÿé›†æˆæµ‹è¯•

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] é›†æˆæµ‹è¯•ï¼šç±»å‹å½’çº³å®Œæ•´æµç¨‹
- [ ] æ€§èƒ½æµ‹è¯•ï¼š10ä¸‡æ¡æ•°æ®æŸ¥è¯¢
- [ ] ä¿®å¤å‘ç°çš„é—®é¢˜

**éªŒæ”¶æ ‡å‡†**:
- [ ] é›†æˆæµ‹è¯•é€šè¿‡ç‡ 100%
- [ ] æŸ¥è¯¢å“åº”æ—¶é—´ P95 < 100ms
- [ ] æ— é˜»å¡æ€§ç¼ºé™·

**è´Ÿè´£äºº**: åç«¯å·¥ç¨‹å¸ˆ A + æµ‹è¯•å·¥ç¨‹å¸ˆ
**é¢„ä¼°å·¥æ—¶**: 8 å°æ—¶

### 2.2 Week 2: æ³¨å…¥åŸºç¡€è®¾æ–½

#### Day 1-2: SystemPromptService å¢å¼º

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] æ‰©å±• SystemPromptService æ”¯æŒæ¨¡æ¿ç‰‡æ®µ
- [ ] å®ç°æ¨¡æ¿å˜é‡æ³¨å…¥
- [ ] æ·»åŠ æ¨¡æ¿ç¼“å­˜æœºåˆ¶

**ä»£ç äº¤ä»˜**:
```typescript
// ä¿®æ”¹æ–‡ä»¶
src/services/SystemPromptService.ts

// æ–°å¢æ–¹æ³•
- registerTemplateFragment()
- renderTemplateFragment()
- clearTemplateCache()
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ”¯æŒåŠ¨æ€æ¨¡æ¿æ³¨å†Œ
- [ ] å˜é‡æ›¿æ¢æ­£ç¡® (æ”¯æŒåµŒå¥—å˜é‡)
- [ ] ç¼“å­˜å‘½ä¸­ç‡ > 90%
- [ ] å•å…ƒæµ‹è¯•è¦†ç›– >= 85%

**è´Ÿè´£äºº**: åç«¯å·¥ç¨‹å¸ˆ A
**é¢„ä¼°å·¥æ—¶**: 16 å°æ—¶

#### Day 3-4: VariableEngine å¢å¼º

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] æ·»åŠ  Playbook å˜é‡è§£æå™¨
- [ ] æ”¯æŒå¤æ‚å˜é‡è¡¨è¾¾å¼
- [ ] æ€§èƒ½ä¼˜åŒ– (ç¼“å­˜ 30s)

**ä»£ç äº¤ä»˜**:
```typescript
// ä¿®æ”¹æ–‡ä»¶
src/core/variable/VariableEngine.ts

// æ–°å¢è§£æå™¨
- PlaybookVariableResolver
- TemplateVariableResolver
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] å˜é‡è§£ææ­£ç¡®ç‡ 100%
- [ ] è§£ææ—¶é—´ < 10ms
- [ ] ç¼“å­˜æœ‰æ•ˆ

**è´Ÿè´£äºº**: åç«¯å·¥ç¨‹å¸ˆ B
**é¢„ä¼°å·¥æ—¶**: 16 å°æ—¶

#### Day 5: PlaybookTemplateManager åŸºç¡€ç‰ˆ

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] åˆ›å»º PlaybookTemplateManager ç±»
- [ ] å®ç°åŸºç¡€æ¨¡æ¿æ¸²æŸ“
- [ ] æ·»åŠ æ•ˆæœè¿½è¸ª

**ä»£ç äº¤ä»˜**:
```typescript
// æ–°å»ºæ–‡ä»¶
src/core/playbook/PlaybookTemplateManager.ts

// ä¸»è¦æ–¹æ³•
- renderTemplate()
- selectBestTemplate()
- evaluateTemplate()
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ¨¡æ¿æ¸²æŸ“æ­£ç¡®
- [ ] å˜é‡æ›¿æ¢å®Œæ•´
- [ ] æ•ˆæœç»Ÿè®¡æ­£å¸¸

**è´Ÿè´£äºº**: åç«¯å·¥ç¨‹å¸ˆ A
**é¢„ä¼°å·¥æ—¶**: 8 å°æ—¶

## 3. é˜¶æ®µäºŒï¼šæ ¸å¿ƒåŠŸèƒ½å®ç° (Week 3-5)

### 3.1 Week 3: åŠ¨æ€ç±»å‹å¼•æ“

#### Day 1-2: ç±»å‹å½’çº³ç®—æ³•ä¼˜åŒ–

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] å®ç° Jaccard ç›¸ä¼¼åº¦ç®—æ³•
- [ ] ä¼˜åŒ–èšç±»æ€§èƒ½
- [ ] æ·»åŠ  LLM æ¨¡å¼è¯†åˆ«æç¤ºå·¥ç¨‹

**ä»£ç äº¤ä»˜**:
```typescript
// ä¿®æ”¹æ–‡ä»¶
src/core/playbook/TypeInductionEngine.ts

// ä¼˜åŒ–æ–¹æ³•
- calculateFeatureSimilarity()
- buildInductionPrompt()
- parseInductionResponse()
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] èšç±»é€Ÿåº¦æå‡ 50%
- [ ] LLM è¯±å¯¼å‡†ç¡®ç‡ > 80%
- [ ] è¯¯åˆ¤ç‡ < 10%

**è´Ÿè´£äºº**: ç®—æ³•å·¥ç¨‹å¸ˆ
**é¢„ä¼°å·¥æ—¶**: 16 å°æ—¶

#### Day 3-4: åˆå§‹ç±»å‹è¯æ±‡è¡¨æ„å»º

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] åˆ†æç°æœ‰ Playbook æ•°æ®
- [ ] æ„å»ºåˆå§‹ç±»å‹è¯æ±‡è¡¨
- [ ] æ‰‹åŠ¨éªŒè¯å’Œè°ƒæ•´

**ä»£ç äº¤ä»˜**:
```typescript
// æ–°å»ºè„šæœ¬
scripts/build-initial-type-vocabulary.ts

// è¾“å‡º
data/type_vocabulary_initial.json
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] åˆå§‹ç±»å‹æ•°: 10-15 ä¸ª
- [ ] è¦†ç›– 80% ç°æœ‰ Playbook
- [ ] å¹³å‡ç½®ä¿¡åº¦ > 0.7

**è´Ÿè´£äºº**: åç«¯å·¥ç¨‹å¸ˆ A + PM
**é¢„ä¼°å·¥æ—¶**: 16 å°æ—¶

#### Day 5: ç±»å‹æ¼”è¿›æœºåˆ¶

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] å®ç°ç±»å‹åˆå¹¶é€»è¾‘
- [ ] å®ç°è¡°é€€ç±»å‹æ£€æµ‹
- [ ] æ·»åŠ å†å²è¿½è¸ª

**ä»£ç äº¤ä»˜**:
```typescript
// ä¿®æ”¹æ–‡ä»¶
src/services/TypeVocabularyService.ts

// æ–°å¢æ–¹æ³•
- mergeTypes()
- detectDecayingTypes()
- getEvolutionHistory()
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] åˆå¹¶å‡†ç¡®ç‡ > 90%
- [ ] è¡°é€€æ£€æµ‹æœ‰æ•ˆ
- [ ] å†å²è®°å½•å®Œæ•´

**è´Ÿè´£äºº**: åç«¯å·¥ç¨‹å¸ˆ B
**é¢„ä¼°å·¥æ—¶**: 8 å°æ—¶

### 3.2 Week 4: åŒ¹é…ç®—æ³• + æ¨¡æ¿ç³»ç»Ÿ

#### Day 1-2: PlaybookMatcher é‡å†™

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] é‡å†™å¤šæ ‡ç­¾åŒ¹é…ç®—æ³•
- [ ] å®ç°ç½®ä¿¡åº¦è®¡ç®—
- [ ] æ·»åŠ æ ‡ç­¾ç›¸ä¼¼åº¦æ£€ç´¢

**ä»£ç äº¤ä»˜**:
```typescript
// ä¿®æ”¹æ–‡ä»¶
src/services/PlaybookMatcher.ts

// æ–°å¢æ–¹æ³•
- matchPlaybooksDynamic()
- calculateMultiTagMatchScore()
- extractTypeSignals()
- findPlaybooksByTypeSignals()
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] åŒ¹é…å‡†ç¡®ç‡ > 85%
- [ ] å“åº”æ—¶é—´ P95 < 100ms
- [ ] æ”¯æŒå¤šæ ‡ç­¾æŸ¥è¯¢

**è´Ÿè´£äºº**: åç«¯å·¥ç¨‹å¸ˆ A
**é¢„ä¼°å·¥æ—¶**: 16 å°æ—¶

#### Day 3-4: æç¤ºè¯æ¨¡æ¿ç³»ç»Ÿ

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] åˆ›å»º 5 ä¸ªåŸºç¡€æ¨¡æ¿
- [ ] å®ç°æ™ºèƒ½æ¨¡æ¿é€‰æ‹©
- [ ] æ·»åŠ æ¨¡æ¿æ•ˆæœè¯„ä¼°

**ä»£ç äº¤ä»˜**:
```sql
-- åˆå§‹åŒ–æ•°æ®
data/prompt_templates_initial.sql
```

```typescript
// æ–°å»ºæ–‡ä»¶
src/core/playbook/PlaybookInjector.ts

// ä¸»è¦æ–¹æ³•
- injectGuidance()
- performInjection()
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ¨¡æ¿æ¸²æŸ“æ­£ç¡®
- [ ] é€‰æ‹©ç®—æ³•æœ‰æ•ˆ
- [ ] æ•ˆæœè¯„ä¼°å‡†ç¡®

**è´Ÿè´£äºº**: åç«¯å·¥ç¨‹å¸ˆ B
**é¢„ä¼°å·¥æ—¶**: 16 å°æ—¶

#### Day 5: é›†æˆæµ‹è¯•

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] å®Œæ•´åŒ¹é…æµç¨‹æµ‹è¯•
- [ ] æ¨¡æ¿æ³¨å…¥æµ‹è¯•
- [ ] æ€§èƒ½å‹åŠ›æµ‹è¯•

**éªŒæ”¶æ ‡å‡†**:
- [ ] é›†æˆæµ‹è¯•é€šè¿‡ç‡ 100%
- [ ] å‹æµ‹ QPS > 100
- [ ] æ— å†…å­˜æ³„æ¼

**è´Ÿè´£äºº**: æµ‹è¯•å·¥ç¨‹å¸ˆ
**é¢„ä¼°å·¥æ—¶**: 8 å°æ—¶

### 3.3 Week 5: å¤šæ ‡ç­¾ç®¡ç† + ç½®ä¿¡åº¦æ¨¡å‹

#### Day 1-2: å¤šæ ‡ç­¾æ”¯æŒ

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] ä¿®æ”¹ Playbook æ•°æ®æ¨¡å‹
- [ ] æ”¯æŒç±»å‹æ ‡ç­¾åŠ¨æ€å…³è”
- [ ] å®ç°æ‰¹é‡æ ‡ç­¾åˆ†é…

**ä»£ç äº¤ä»˜**:
```typescript
// ä¿®æ”¹æ–‡ä»¶
src/types/playbook.ts

// æ›´æ–°æ¥å£
interface StrategicPlaybook {
  type_tags?: string[];
  type_confidence?: Record<string, number>;
  prompt_template_id?: string;
  guidance_level?: 'light' | 'medium' | 'intensive';
}
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ•°æ®è¿ç§»å¹³æ»‘
- [ ] å¤šæ ‡ç­¾æŸ¥è¯¢æ­£ç¡®
- [ ] å‘åå…¼å®¹

**è´Ÿè´£äºº**: åç«¯å·¥ç¨‹å¸ˆ A
**é¢„ä¼°å·¥æ—¶**: 16 å°æ—¶

#### Day 3-4: ç½®ä¿¡åº¦è®¡ç®—æ¨¡å‹

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] å®ç°ç±»å‹-Playbook ç½®ä¿¡åº¦ç®—æ³•
- [ ] æ”¯æŒåŠ¨æ€ç½®ä¿¡åº¦æ›´æ–°
- [ ] æ·»åŠ ç½®ä¿¡åº¦éªŒè¯æœºåˆ¶

**ä»£ç äº¤ä»˜**:
```typescript
// æ–°å»ºæ–‡ä»¶
src/core/playbook/ConfidenceModel.ts

// ä¸»è¦æ–¹æ³•
- calculateAssignmentConfidence()
- updateConfidenceFromUsage()
- validateConfidenceScore()
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] ç½®ä¿¡åº¦è®¡ç®—åˆç† [0-1]
- [ ] åŠ¨æ€æ›´æ–°æœ‰æ•ˆ
- [ ] éªŒè¯æœºåˆ¶æ­£ç¡®

**è´Ÿè´£äºº**: ç®—æ³•å·¥ç¨‹å¸ˆ
**é¢„ä¼°å·¥æ—¶**: 16 å°æ—¶

#### Day 5: æ€§èƒ½ä¼˜åŒ–

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] ä¼˜åŒ–æŸ¥è¯¢ç´¢å¼•
- [ ] æ·»åŠ ç¼“å­˜å±‚
- [ ] æ€§èƒ½è°ƒä¼˜

**éªŒæ”¶æ ‡å‡†**:
- [ ] æŸ¥è¯¢é€Ÿåº¦æå‡ 50%
- [ ] ç¼“å­˜å‘½ä¸­ç‡ > 85%
- [ ] å†…å­˜ä½¿ç”¨ä¼˜åŒ– 30%

**è´Ÿè´£äºº**: åç«¯å·¥ç¨‹å¸ˆ B
**é¢„ä¼°å·¥æ—¶**: 8 å°æ—¶

## 4. é˜¶æ®µä¸‰ï¼šæ·±åº¦é›†æˆ (Week 6-7)

### 4.1 Week 6: ReAct ç­–ç•¥é›†æˆ

#### Day 1-2: ReActStrategy æ”¹é€ 

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] åœ¨ prepare() ä¸­é›†æˆ Playbook åŒ¹é…
- [ ] å®ç°æ³¨å…¥å†³ç­–é€»è¾‘
- [ ] æ·»åŠ æ€è€ƒé“¾èåˆ

**ä»£ç äº¤ä»˜**:
```typescript
// ä¿®æ”¹æ–‡ä»¶
src/strategies/ReActStrategy.ts

// ä¿®æ”¹æ–¹æ³•
async prepare() {
  // æ–°å¢: Playbook åŒ¹é…å’Œæ³¨å…¥
  const playbookGuidance = await this.matchAndInjectPlaybooks();
  return {
    tools,
    variables: { ...playbookGuidance }
  };
}
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ³¨å…¥æ—¶åºæ­£ç¡® (prepare é˜¶æ®µ)
- [ ] æ€è€ƒé“¾å¯è¯»æ€§è‰¯å¥½
- [ ] æ— æ€§èƒ½å›é€€

**è´Ÿè´£äºº**: åç«¯å·¥ç¨‹å¸ˆ A
**é¢„ä¼°å·¥æ—¶**: 16 å°æ—¶

#### Day 3-4: æ™ºèƒ½æ³¨å…¥å†³ç­–

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] å®ç°æ³¨å…¥å¼ºåº¦æ§åˆ¶
- [ ] æ·»åŠ å†²çªå¤„ç†æœºåˆ¶
- [ ] å®ç°å¤±è´¥å›é€€

**ä»£ç äº¤ä»˜**:
```typescript
// ä¿®æ”¹æ–‡ä»¶
src/core/playbook/PlaybookInjector.ts

// æ–°å¢æ–¹æ³•
- determineInjectionPoint()
- handleConflict()
- fallbackToDefault()
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] å¼ºåº¦æ§åˆ¶æœ‰æ•ˆ (è½»/ä¸­/é‡)
- [ ] å†²çªå¤„ç†æ­£ç¡®
- [ ] å›é€€æœºåˆ¶å¯é 

**è´Ÿè´£äºº**: åç«¯å·¥ç¨‹å¸ˆ B
**é¢„ä¼°å·¥æ—¶**: 16 å°æ—¶

#### Day 5: ç«¯åˆ°ç«¯æµ‹è¯•

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] å®Œæ•´èŠå¤©æµç¨‹æµ‹è¯•
- [ ] æ³¨å…¥æ•ˆæœéªŒè¯
- [ ] ç”¨æˆ·ä½“éªŒè¯„ä¼°

**éªŒæ”¶æ ‡å‡†**:
- [ ] ç«¯åˆ°ç«¯æˆåŠŸç‡ > 95%
- [ ] æ³¨å…¥æŒ‡å¯¼æœ‰æ•ˆ
- [ ] ç”¨æˆ·æ»¡æ„åº¦ > 8/10

**è´Ÿè´£äºº**: æµ‹è¯•å·¥ç¨‹å¸ˆ + PM
**é¢„ä¼°å·¥æ—¶**: 8 å°æ—¶

### 4.2 Week 7: æ™ºèƒ½æ³¨å…¥ + æ•ˆæœè¯„ä¼°

#### Day 1-2: å¤š Playbook æ³¨å…¥

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] æ”¯æŒåŒæ—¶æ³¨å…¥å¤šä¸ª Playbook
- [ ] å®ç° Playbook åºåˆ—æŒ‡å¯¼
- [ ] ä¼˜åŒ–æ³¨å…¥å†…å®¹æ•´åˆ

**ä»£ç äº¤ä»˜**:
```typescript
// ä¿®æ”¹æ–‡ä»¶
src/core/playbook/PlaybookInjector.ts

// æ–°å¢æ–¹æ³•
- injectMultiplePlaybooks()
- createPlaybookSequence()
- mergeGuidanceContent()
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ”¯æŒ 2-3 ä¸ª Playbook åŒæ—¶æ³¨å…¥
- [ ] åºåˆ—æŒ‡å¯¼é€»è¾‘æ­£ç¡®
- [ ] å†…å®¹æ•´åˆæµç•…

**è´Ÿè´£äºº**: åç«¯å·¥ç¨‹å¸ˆ A
**é¢„ä¼°å·¥æ—¶**: 16 å°æ—¶

#### Day 3-4: æ•ˆæœè¯„ä¼°æœºåˆ¶

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] å®ç°æ•ˆæœè¯„åˆ†ç®—æ³•
- [ ] æ·»åŠ ç”¨æˆ·åé¦ˆæ”¶é›†
- [ ] è‡ªåŠ¨ä¼˜åŒ–æ¨¡æ¿é€‰æ‹©

**ä»£ç äº¤ä»˜**:
```typescript
// æ–°å»ºæ–‡ä»¶
src/core/playbook/EffectivenessTracker.ts

// ä¸»è¦æ–¹æ³•
- trackEffectiveness()
- calculateSatisfactionScore()
- optimizeTemplateSelection()
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] è¯„åˆ†ç®—æ³•åˆç†
- [ ] åé¦ˆæ”¶é›†æœ‰æ•ˆ
- [ ] è‡ªåŠ¨ä¼˜åŒ–ç”Ÿæ•ˆ

**è´Ÿè´£äºº**: ç®—æ³•å·¥ç¨‹å¸ˆ
**é¢„ä¼°å·¥æ—¶**: 16 å°æ—¶

#### Day 5: A/B æµ‹è¯•å‡†å¤‡

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] é…ç½® A/B æµ‹è¯•æ¡†æ¶
- [ ] è®¾ç½®ç›‘æ§æŒ‡æ ‡
- [ ] å‡†å¤‡æµ‹è¯•ç”¨ä¾‹

**éªŒæ”¶æ ‡å‡†**:
- [ ] A/B æµ‹è¯•å¯é…ç½®
- [ ] æŒ‡æ ‡æ”¶é›†å®Œæ•´
- [ ] æµ‹è¯•åœºæ™¯è¦†ç›–

**è´Ÿè´£äºº**: æµ‹è¯•å·¥ç¨‹å¸ˆ
**é¢„ä¼°å·¥æ—¶**: 8 å°æ—¶

## 5. é˜¶æ®µå››ï¼šä¼˜åŒ–å®Œå–„ (Week 8)

### 5.1 Week 8: æ€§èƒ½ä¼˜åŒ– + æ–‡æ¡£å®Œå–„

#### Day 1-2: æ€§èƒ½ä¼˜åŒ–

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–
- [ ] å†…å­˜ä½¿ç”¨ä¼˜åŒ–
- [ ] å¹¶å‘å¤„ç†ä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**:
- [ ] QPS > 200 (æå‡ 100%)
- [ ] å†…å­˜ä½¿ç”¨ < 1GB
- [ ] 99% è¯·æ±‚ < 200ms

**è´Ÿè´£äºº**: åç«¯å·¥ç¨‹å¸ˆ A + B
**é¢„ä¼°å·¥æ—¶**: 16 å°æ—¶

#### Day 3: é”™è¯¯å¤„ç†å®Œå–„

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] å®Œå–„é”™è¯¯ç ä½“ç³»
- [ ] æ·»åŠ è¯¦ç»†æ—¥å¿—
- [ ] å®ç°å‘Šè­¦æœºåˆ¶

**éªŒæ”¶æ ‡å‡†**:
- [ ] é”™è¯¯ç è¦†ç›–å®Œæ•´
- [ ] æ—¥å¿—ä¿¡æ¯å……åˆ†
- [ ] å‘Šè­¦åŠæ—¶æœ‰æ•ˆ

**è´Ÿè´£äºº**: åç«¯å·¥ç¨‹å¸ˆ A
**é¢„ä¼°å·¥æ—¶**: 8 å°æ—¶

#### Day 4: æ–‡æ¡£ç¼–å†™

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] ç¼–å†™ API æ–‡æ¡£
- [ ] ç¼–å†™å¼€å‘æ–‡æ¡£
- [ ] ç¼–å†™è¿ç»´æ–‡æ¡£

**éªŒæ”¶æ ‡å‡†**:
- [ ] API æ–‡æ¡£å®Œæ•´
- [ ] å¼€å‘æ–‡æ¡£æ¸…æ™°
- [ ] è¿ç»´æ–‡æ¡£è¯¦ç»†

**è´Ÿè´£äºº**: æ‰€æœ‰å·¥ç¨‹å¸ˆ
**é¢„ä¼°å·¥æ—¶**: 8 å°æ—¶

#### Day 5: å…¨é¢æµ‹è¯•

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] å•å…ƒæµ‹è¯•è¡¥å……
- [ ] é›†æˆæµ‹è¯•å®Œå–„
- [ ] å›å½’æµ‹è¯•
- [ ] ä¸Šçº¿å‰æ£€æŸ¥

**éªŒæ”¶æ ‡å‡†**:
- [ ] æµ‹è¯•è¦†ç›–ç‡ > 90%
- [ ] å›å½’æµ‹è¯•é€šè¿‡
- [ ] ä¸Šçº¿æ£€æŸ¥æ¸…å•å®Œæˆ

**è´Ÿè´£äºº**: æµ‹è¯•å·¥ç¨‹å¸ˆ + æ‰€æœ‰å·¥ç¨‹å¸ˆ
**é¢„ä¼°å·¥æ—¶**: 8 å°æ—¶

## 6. è¯¦ç»†ä»»åŠ¡åˆ†è§£

### 6.1 ä»»åŠ¡çœ‹æ¿ (ç¤ºä¾‹)

```
Phase 1: åŸºç¡€å»ºè®¾
â”œâ”€ ğŸ”´ TypeInductionEngine æ ¸å¿ƒç±» (16h)
â”œâ”€ ğŸ”´ SQLite æ•°æ®è¡¨åˆ›å»º (16h)
â”œâ”€ ğŸŸ¡ SystemPromptService å¢å¼º (16h)
â”œâ”€ ğŸŸ¡ VariableEngine å¢å¼º (16h)
â””â”€ ğŸŸ¢ ç³»ç»Ÿé›†æˆæµ‹è¯• (8h)

Phase 2: æ ¸å¿ƒåŠŸèƒ½
â”œâ”€ ğŸ”´ ç±»å‹å½’çº³ç®—æ³•ä¼˜åŒ– (16h)
â”œâ”€ ğŸ”´ åˆå§‹è¯æ±‡è¡¨æ„å»º (16h)
â”œâ”€ ğŸŸ¡ PlaybookMatcher é‡å†™ (16h)
â”œâ”€ ğŸŸ¡ æ¨¡æ¿ç³»ç»Ÿå®ç° (16h)
â”œâ”€ ğŸŸ¢ å¤šæ ‡ç­¾æ”¯æŒ (16h)
â””â”€ ğŸŸ¢ ç½®ä¿¡åº¦æ¨¡å‹ (16h)

Phase 3: æ·±åº¦é›†æˆ
â”œâ”€ ğŸ”´ ReActStrategy æ”¹é€  (16h)
â”œâ”€ ğŸŸ¡ æ™ºèƒ½æ³¨å…¥å†³ç­– (16h)
â”œâ”€ ğŸŸ¡ å¤š Playbook æ³¨å…¥ (16h)
â””â”€ ğŸŸ¢ æ•ˆæœè¯„ä¼°æœºåˆ¶ (16h)

Phase 4: ä¼˜åŒ–å®Œå–„
â”œâ”€ ğŸ”´ æ€§èƒ½ä¼˜åŒ– (16h)
â”œâ”€ ğŸŸ¡ é”™è¯¯å¤„ç†å®Œå–„ (8h)
â”œâ”€ ğŸŸ¡ æ–‡æ¡£ç¼–å†™ (8h)
â””â”€ ğŸŸ¢ å…¨é¢æµ‹è¯• (8h)

å›¾ä¾‹:
ğŸ”´ é«˜ä¼˜å…ˆçº§
ğŸŸ¡ ä¸­ä¼˜å…ˆçº§
ğŸŸ¢ ä½ä¼˜å…ˆçº§
```

### 6.2 ä¾èµ–å…³ç³»å›¾

```
TypeInductionEngine
    â†“
TypeVocabularyService â†â†’ SimilarityService
    â†“                           â†“
PlaybookMatcher â†â†’ PlaybookTypeService
    â†“                           â†“
PlaybookTemplateManager â†â†’ PlaybookInjector
    â†“
ReActStrategy (æ”¹é€ )
    â†“
å®Œæ•´ç³»ç»Ÿé›†æˆ
```

### 6.3 é‡Œç¨‹ç¢‘æ£€æŸ¥ç‚¹

| å‘¨æ¬¡ | é‡Œç¨‹ç¢‘ | éªŒæ”¶æ ‡å‡† |
|------|--------|----------|
| Week 1 | TypeInductionEngine å®Œæˆ | è¯±å¯¼å‡†ç¡®ç‡ > 80% |
| Week 2 | æ³¨å…¥åŸºç¡€è®¾æ–½å®Œæˆ | æ¨¡æ¿æ¸²æŸ“æ­£ç¡® |
| Week 3 | åŠ¨æ€ç±»å‹å¼•æ“å®Œæˆ | è¯æ±‡è¡¨æ„å»ºå®Œæˆ |
| Week 4 | åŒ¹é…ç®—æ³•å®Œæˆ | åŒ¹é…å‡†ç¡®ç‡ > 85% |
| Week 5 | å¤šæ ‡ç­¾ç®¡ç†å®Œæˆ | ç½®ä¿¡åº¦æ¨¡å‹æœ‰æ•ˆ |
| Week 6 | ReAct é›†æˆå®Œæˆ | ç«¯åˆ°ç«¯æµ‹è¯•é€šè¿‡ |
| Week 7 | æ™ºèƒ½æ³¨å…¥å®Œæˆ | A/B æµ‹è¯•å‡†å¤‡å°±ç»ª |
| Week 8 | ç³»ç»Ÿä¼˜åŒ–å®Œæˆ | æ€§èƒ½è¾¾æ ‡ï¼Œæ–‡æ¡£å®Œæ•´ |

## 7. èµ„æºåˆ†é…

### 7.1 äººå‘˜åˆ†å·¥

| è§’è‰² | äººå‘˜ | ä¸»è¦èŒè´£ | å‘¨å·¥ä½œæ—¶é•¿ |
|------|------|----------|------------|
| åç«¯å·¥ç¨‹å¸ˆ A | å¼ ä¸‰ | TypeInductionEngineã€ReAct æ”¹é€ ã€API å¼€å‘ | 40h/week |
| åç«¯å·¥ç¨‹å¸ˆ B | æå›› | æ•°æ®æ¨¡å‹ã€VariableEngineã€æ¨¡æ¿ç³»ç»Ÿ | 40h/week |
| ç®—æ³•å·¥ç¨‹å¸ˆ | ç‹äº” | èšç±»ç®—æ³•ã€ç½®ä¿¡åº¦æ¨¡å‹ã€æ•ˆæœè¯„ä¼° | 40h/week |
| å‰ç«¯å·¥ç¨‹å¸ˆ | èµµå…­ | ç®¡ç†ç•Œé¢å¼€å‘ | 20h/week |
| æµ‹è¯•å·¥ç¨‹å¸ˆ | å­™ä¸ƒ | æµ‹è¯•ç”¨ä¾‹ã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€æ€§èƒ½æµ‹è¯• | 40h/week |
| é¡¹ç›®ç»ç† | å‘¨å…« | è¿›åº¦ç®¡ç†ã€èµ„æºåè°ƒã€é£é™©ç®¡ç† | 30h/week |

### 7.2 æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯é€‰å‹ | ç†ç”± |
|------|----------|------|
| æ•°æ®åº“ | SQLite | è½»é‡çº§ã€æ˜“éƒ¨ç½²ã€è¶³å¤Ÿæ€§èƒ½ |
| ç¼“å­˜ | Redis | æˆç†Ÿæ–¹æ¡ˆã€ä¸°å¯ŒåŠŸèƒ½ |
| å‘é‡æ£€ç´¢ | LanceDB | ç°æœ‰ç³»ç»Ÿä½¿ç”¨ã€ä¸€è‡´æ€§ |
| ä»»åŠ¡é˜Ÿåˆ— | Redis Queue | ç®€å•å¯é ã€é¿å…é¢å¤–ä¾èµ– |
| ç›‘æ§ | Winston + è‡ªå®šä¹‰æŒ‡æ ‡ | ç°æœ‰æ—¥å¿—ç³»ç»Ÿé›†æˆ |

## 8. é£é™©ä¸åº”å¯¹

### 8.1 æŠ€æœ¯é£é™©

| é£é™© | æ¦‚ç‡ | å½±å“ | åº”å¯¹ç­–ç•¥ |
|------|------|------|----------|
| LLM è¯±å¯¼ä¸å‡†ç¡® | ä¸­ | é«˜ | äººå·¥å®¡æ ¸ + A/B æµ‹è¯•éªŒè¯ |
| æ€§èƒ½ä¸è¾¾æ ‡ | ä½ | é«˜ | æ—©æœŸæ€§èƒ½æµ‹è¯• + æŒç»­ä¼˜åŒ– |
| æ•°æ®è¿ç§»å¤±è´¥ | ä½ | é«˜ | å……åˆ†æµ‹è¯• + å›æ»šæ–¹æ¡ˆ |
| å†…å­˜æ³„æ¼ | ä¸­ | ä¸­ | å†…å­˜ç›‘æ§ + å®šæœŸæ£€æµ‹ |

### 8.2 è¿›åº¦é£é™©

| é£é™© | æ¦‚ç‡ | å½±å“ | åº”å¯¹ç­–ç•¥ |
|------|------|------|----------|
| éœ€æ±‚å˜æ›´ | ä¸­ | ä¸­ | å†»ç»“æ ¸å¿ƒéœ€æ±‚ã€è¿­ä»£è°ƒæ•´ |
| äººå‘˜è¯·å‡ | ä¸­ | ä¸­ | çŸ¥è¯†å…±äº«ã€äº¤å‰å¤‡ä»½ |
| æŠ€æœ¯éš¾ç‚¹ | ä½ | é«˜ | æå‰ç ”ç©¶ã€å¯»æ±‚ä¸“å®¶æ”¯æŒ |

### 8.3 è´¨é‡é£é™©

| é£é™© | æ¦‚ç‡ | å½±å“ | åº”å¯¹ç­–ç•¥ |
|------|------|------|----------|
| æµ‹è¯•ä¸å……åˆ† | ä¸­ | é«˜ | å¢åŠ æµ‹è¯•æ—¶é—´ã€è‡ªåŠ¨åŒ–æµ‹è¯• |
| æ–‡æ¡£ç¼ºå¤± | ä½ | ä¸­ | ä¸“äººè´Ÿè´£ã€åŒæ­¥ç¼–å†™ |
| é›†æˆé—®é¢˜ | ä¸­ | é«˜ | æ—©æœŸé›†æˆã€æŒç»­é›†æˆ |

## 9. ç›‘æ§ä¸æŠ¥å‘Š

### 9.1 æ—¥å¸¸æŠ¥å‘Š

**æ¯æ—¥ç«™ä¼š** (15åˆ†é’Ÿ)
- æ˜¨æ—¥å®Œæˆ
- ä»Šæ—¥è®¡åˆ’
- é˜»å¡é—®é¢˜

**å‘¨æŠ¥** (æ¯å‘¨äº”)
- è¿›åº¦æ€»ç»“
- é‡Œç¨‹ç¢‘è¾¾æˆæƒ…å†µ
- é£é™©å’Œé—®é¢˜
- ä¸‹å‘¨è®¡åˆ’

### 9.2 è´¨é‡æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æµ‹é‡æ–¹æ³• |
|------|--------|----------|
| ä»£ç è¦†ç›–ç‡ | > 90% | Jest è¦†ç›–ç‡æŠ¥å‘Š |
| ç¼ºé™·å¯†åº¦ | < 1/KLOC | ç¼ºé™·è·Ÿè¸ªç³»ç»Ÿ |
| æ€§èƒ½è¾¾æ ‡ç‡ | 95% | è‡ªåŠ¨åŒ–æ€§èƒ½æµ‹è¯• |
| æŒ‰æ—¶äº¤ä»˜ç‡ | 90% | é¡¹ç›®ç®¡ç†ç³»ç»Ÿ |

### 9.3 éªŒæ”¶æ ‡å‡†

**åŠŸèƒ½éªŒæ”¶**:
- [ ] æ‰€æœ‰ç”¨æˆ·æ•…äº‹å®Œæˆ
- [ ] å•å…ƒæµ‹è¯•é€šè¿‡
- [ ] é›†æˆæµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½æµ‹è¯•è¾¾æ ‡

**è´¨é‡éªŒæ”¶**:
- [ ] ä»£ç å®¡æŸ¥é€šè¿‡
- [ ] æ–‡æ¡£å®Œæ•´
- [ ] æ— é˜»å¡æ€§ç¼ºé™·
- [ ] å®‰å…¨æ‰«æé€šè¿‡

**ä¸Šçº¿éªŒæ”¶**:
- [ ] éƒ¨ç½²æ–‡æ¡£é½å…¨
- [ ] ç›‘æ§å‘Šè­¦é…ç½®
- [ ] å›æ»šæ–¹æ¡ˆéªŒè¯
- [ ] å›¢é˜ŸåŸ¹è®­å®Œæˆ

## 10. ä¸Šçº¿è®¡åˆ’

### 10.1 å‘å¸ƒç­–ç•¥

**ç°åº¦å‘å¸ƒ** (2å‘¨)
- Week 1: å†…éƒ¨ç”¨æˆ· 10%
- Week 2: å†…éƒ¨ç”¨æˆ· 50%
- Week 3: æ‰€æœ‰ç”¨æˆ· 100%

**ç›‘æ§æŒ‡æ ‡**:
- é”™è¯¯ç‡ < 1%
- å“åº”æ—¶é—´ P95 < 200ms
- ç”¨æˆ·æ»¡æ„åº¦ > 8/10

### 10.2 å›æ»šæ–¹æ¡ˆ

**è§¦å‘æ¡ä»¶**:
- é”™è¯¯ç‡ > 5%
- å“åº”æ—¶é—´ P95 > 500ms
- ç”¨æˆ·æŠ•è¯‰ > 10 ä¸ª

**å›æ»šæ­¥éª¤**:
1. å…³é—­æ–°åŠŸèƒ½å¼€å…³
2. å›æ»šåˆ°ä¸Šä¸€ç‰ˆæœ¬
3. é€šçŸ¥ç›¸å…³äººå‘˜
4. åˆ†æé—®é¢˜æ ¹å› 

### 10.3 åº”æ€¥é¢„æ¡ˆ

**åº”æ€¥è”ç³»äºº**:
- æŠ€æœ¯è´Ÿè´£äºº: å¼ ä¸‰ (ç”µè¯)
- é¡¹ç›®ç»ç†: å‘¨å…« (ç”µè¯)
- è¿ç»´å·¥ç¨‹å¸ˆ: å´ä¹ (ç”µè¯)

**åº”æ€¥æµç¨‹**:
1. é—®é¢˜å‘ç° â†’ ç«‹å³å“åº” (15åˆ†é’Ÿ)
2. å½±å“è¯„ä¼° â†’ å¿«é€Ÿå†³ç­– (30åˆ†é’Ÿ)
3. å®æ–½ä¿®å¤ â†’ å°½å¿«è§£å†³ (2å°æ—¶)
4. å¤ç›˜æ€»ç»“ â†’ æ”¹è¿›é¢„é˜² (24å°æ—¶)

---

## é™„å½•

### A. ä»£ç è§„èŒƒ
- TypeScript ä¸¥æ ¼æ¨¡å¼
- ESLint + Prettier
- æäº¤ä¿¡æ¯è§„èŒƒ (Conventional Commits)

### B. æµ‹è¯•è§„èŒƒ
- å•å…ƒæµ‹è¯•: Jest
- é›†æˆæµ‹è¯•: Supertest
- E2E æµ‹è¯•: Playwright
- è¦†ç›–ç‡é˜ˆå€¼: 90%

### C. éƒ¨ç½²è§„èŒƒ
- Docker å®¹å™¨åŒ–
- Kubernetes ç¼–æ’ (å¯é€‰)
- è“ç»¿éƒ¨ç½²
- è‡ªåŠ¨å›æ»š

### D. æ–‡æ¡£è§„èŒƒ
- API æ–‡æ¡£: OpenAPI/Swagger
- ä»£ç æ³¨é‡Š: JSDoc
- è®¾è®¡æ–‡æ¡£: Markdown
- ç”¨æˆ·æ‰‹å†Œ: ä¸“é—¨çš„æ–‡æ¡£ç«™ç‚¹

---

**ä¸‹ä¸€æ­¥è¡ŒåŠ¨**: è¯·æŸ¥çœ‹ `06-MIGRATION-GUIDE.md` äº†è§£è¿ç§»æ–¹æ¡ˆã€‚
