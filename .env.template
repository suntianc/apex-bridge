# ApexBridge 环境变量配置模板
# 复制此文件为 .env 并填入实际值
#
# 提示：按职责分层配置
# - 系统级配置（API密钥、端口、路径、安全）在此文件中
# - 应用级配置（功能开关、策略参数）在 config/admin-config.json 中

# ====================
# 服务器配置 - 系统级
# ====================

# 服务器端口（默认值：3000）
PORT=3000

# 服务器主机（默认值：0.0.0.0）
HOST=0.0.0.0

# 自动启动控制（默认值：true）
# 设置为 false 可禁止自动启动，用于调试
APEX_BRIDGE_AUTOSTART=true

# ====================
# 路径配置 - 系统级
# ====================

# 项目根目录（默认值：当前目录）
APEX_BRIDGE_ROOT_DIR=.

# 配置目录（默认值：./config）
APEX_BRIDGE_CONFIG_DIR=./config

# 数据目录（默认值：./.data）
APEX_BRIDGE_DATA_DIR=./.data

# 日志目录（默认值：./logs）
APEX_BRIDGE_LOG_DIR=./logs

# 向量存储目录（默认值：./.data/lancedb）
APEX_BRIDGE_VECTOR_STORE_DIR=./.data/lancedb

# ====================
# 安全配置 - 系统级（敏感信息）
# ====================

# ABP API 密钥（必填，用于认证）
# 生成方式：openssl rand -hex 32
ABP_API_KEY=your-abp-api-key-here

# JWT 密钥（必填，用于令牌签名）
# 生成方式：openssl rand -hex 32
JWT_SECRET=your-jwt-secret-here

# ACE L1层宪法文件路径（默认值：./config/constitution.md）
CONSTITUTION_PATH=./config/constitution.md

# ====================
# 运行环境 - 系统级
# ====================

# 节点环境（development/production/test）
NODE_ENV=development

# 日志级别（error/warn/info/debug）
LOG_LEVEL=info

# 日志文件路径（默认值：./logs/apex-bridge.log）
LOG_FILE=./logs/apex-bridge.log

# HTTP 请求体大小限制（默认值：100mb）
MAX_REQUEST_SIZE=100mb

# 安全日志级别（debug/info/warn/error/off）
SECURITY_LOG_LEVEL=warn

# 是否启用安全日志（true/false，默认：true）
SECURITY_LOG_ENABLED=true

# 是否启用详细日志（true/false，默认：false）
VERBOSE_LOGGING=false

# ====================
# LLM 提供商配置 - 系统级（敏感信息）
# ====================
# 注意：
# 1. 这些配置项用于快速设置常用 LLM 提供商
# 2. 运行 `node scripts/init-llm-config-v2.js` 可将它们写入 SQLite 数据库
# 3. 也可以通过 API 动态配置，支持多提供商管理
# 4. 推荐通过 SQLite 管理，生产环境更安全灵活

# ---------- OpenAI ----------
# OpenAI API Key（必填，获取地址：https://platform.openai.com/api-keys）
OPENAI_API_KEY=sk-your-openai-api-key-here

# OpenAI Base URL（可选，默认：https://api.openai.com/v1）
# 用于兼容 OpenAI 协议的第三方服务
OPENAI_BASE_URL=https://api.openai.com/v1

# ---------- DeepSeek ----------
# DeepSeek API Key（必填，获取地址：https://platform.deepseek.com）
DEEPSEEK_API_KEY=sk-your-deepseek-api-key-here

# DeepSeek Base URL（可选，默认：https://api.deepseek.com）
DEEPSEEK_BASE_URL=https://api.deepseek.com

# ---------- 智谱清言 (Zhipu) ----------
# Zhipu API Key（必填，获取地址：https://open.bigmodel.cn/usercenter/apikeys）
ZHIPU_API_KEY=your-zhipu-api-key-here

# Zhipu Base URL（可选，默认：https://open.bigmodel.cn/api/paas/v4）
ZHIPU_BASE_URL=https://open.bigmodel.cn/api/paas/v4

# ---------- 通义千问 (Qwen) ----------
# Qwen API Key（必填，获取地址：https://dashscope.console.aliyun.com/apiKey）
QWEN_API_KEY=sk-your-qwen-api-key-here

# Qwen Base URL（可选，默认：https://dashscope.aliyuncs.com/compatible-mode/v1）
QWEN_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1

# ---------- Ollama (本地 LLM) ----------
# Ollama API Key（可选，本地部署通常不需要）
# 如果设置了认证，请填入对应的 API Key
OLLAMA_API_KEY=

# Ollama Base URL（可选，默认：http://localhost:11434）
# Ollama 本地服务地址，参考：https://ollama.com
OLLAMA_BASE_URL=http://localhost:11434

# ---------- Embedding 模型配置 ----------
# 默认 Embedding 模型提供商（第二优先级）
# 优先级1：SQLite 中配置的默认模型（推荐）
# 优先级2：此处的 .env 配置
# 可选值：openai/deepseek/zhipu/qwen/ollama
EMBEDDING_PROVIDER=openai

# 默认 Embedding 模型名称（第二优先级）
# 常见选择：
# - openai: text-embedding-3-small (1536维) 或 text-embedding-3-large (3072维)
# - deepseek: deepseek-embedding (1024维)
# - zhipu: embedding-2 (2048维)
# - qwen: text-embedding-v2 (1536维)
# - ollama: nomic-embed-text (768维，需先拉取模型)
EMBEDDING_MODEL=nomic-embed-text

# ====================
# 数据库配置 - 系统级
# ====================

# SQLite（LLM配置存储，默认：./.data/llm_providers.db）
SQLITE_PATH=./.data/llm_providers.db

# LanceDB（Playbook 向量存储，默认：./.data/lancedb）
LANCEDB_PATH=./.data/lancedb
