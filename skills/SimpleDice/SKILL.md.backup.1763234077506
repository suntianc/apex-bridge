---
name: SimpleDice
displayName: SimpleDice
description: 掷骰子
version: 1.0.0
type: direct
protocol: abp
abp:
  kind: action
  tools:
    - name: SimpleDice
      description: 掷骰子
      kind: action
      parameters: {}
      returns:
        type: any
        description: 执行结果
      version: 1.0.0
      author: SimpleDice
keywords:
  - dice
domain: utility
permissions:
  network: false
  filesystem: none
cacheable: true
ttl: 3600
---
# 简单骰子

## 描述

掷骰子工具，可指定面数和次数，支持基础统计信息。

## 参数

- `sides` (integer): 骰子面数（默认 6，范围 2-100）
- `count` (integer): 掷骰次数（默认 1，范围 1-10）

## 代码

```typescript
interface RollSummary {
  rolls: number[];
  total: number;
  average: number;
  min: number;
  max: number;
}

function clamp(value: number, min: number, max: number): number {
  return Math.min(Math.max(value, min), max);
}

function rollDice(sides: number, count: number): RollSummary {
  const rolls: number[] = [];
  for (let i = 0; i < count; i++) {
    const roll = Math.floor(Math.random() * sides) + 1;
    rolls.push(roll);
  }

  const total = rolls.reduce((sum, value) => sum + value, 0);
  const average = Number((total / rolls.length).toFixed(2));

  return {
    rolls,
    total,
    average,
    min: Math.min(...rolls),
    max: Math.max(...rolls)
  };
}

export async function execute(params: Record<string, unknown>): Promise<unknown> {
  const rawSides = typeof params.sides === 'number' ? params.sides : Number(params.sides);
  const rawCount = typeof params.count === 'number' ? params.count : Number(params.count);

  const sides = clamp(Number.isFinite(rawSides) ? rawSides : 6, 2, 100);
  const count = clamp(Number.isFinite(rawCount) ? rawCount : 1, 1, 10);

  const summary = rollDice(sides, count);
  return {
    success: true,
    summary,
    message: `掷骰结果: ${summary.rolls.join(', ')}`
  };
}
```
